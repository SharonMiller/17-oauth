<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Upload a file</title>
</head>

<body>

  <main>
    <h1>Upload File</h1>
    <em>Note: This will not work unless you set a Bearer Authorization header with a valid token...</em>
    <form id="upload" enctype="multipart/form-data">
      <label>
        Title
        <input name="title" />
      </label>
      <label>
        File
        <input name="uploadFile" type="file" />
      </label>
      <button type="submit">Upload File</button>
    </form>
  </main>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

  <script>
    $("#upload").on('submit', function (e) {
      e.preventDefault();
      let formData = new FormData(this);
      let token = localStorage.getItem('token');
      $.ajax({
        type: 'POST',
        url: 'http://localhost:3000/upload',
        data: formData,
        processData: false,
        contentType: false,
        headers: {
          'Authorization': 'Bearer ' + token
        },
        success: function (response) {
          console.log(response);
        }
      })
    });
  </script>

</body>

</html>